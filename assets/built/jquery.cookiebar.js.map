{"version":3,"sources":["jquery.cookiebar.js"],"names":["$","cookieBar","options","val","doReturn","defaults","message","acceptButton","acceptText","acceptFunction","cookieValue","window","location","href","declineButton","declineText","declineFunction","policyButton","policyText","policyURL","autoEnable","acceptOnContinue","acceptOnScroll","acceptAnyClick","expireDays","renewOnVisit","forceShow","effect","element","append","fixed","bottom","zindex","domain","String","hostname","referrer","document","expireDate","extend","Date","setTime","getTime","i","aCookie","cookieEntry","toGMTString","aCookies","cookie","split","length","replace","indexOf","prepend","removeBar","func","off","slideUp","remove","fadeOut","hide","unbind","anyClick","cookieAccept","e","target","hasClass","click","deleteDate","cookieDecline","scrollNew","scrollStart","scrollTop","on","Math","round","bind","jQuery"],"mappings":"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","file":"jquery.cookiebar.js","sourcesContent":["/*\r\n * Copyright (C) 2012 PrimeBox\r\n * \r\n * This work is licensed under the Creative Commons\r\n * Attribution 3.0 Unported License. To view a copy\r\n * of this license, visit\r\n * http://creativecommons.org/licenses/by/3.0/.\r\n * \r\n * Documentation available at:\r\n * http://www.primebox.co.uk/projects/cookie-bar/\r\n * \r\n * When using this software you use it at your own risk. We hold\r\n * no responsibility for any damage caused by using this plugin\r\n * or the documentation provided.\r\n */\r\n(function($){\r\n\t$.cookieBar = function(options,val){\r\n\t\tif(options=='cookies'){\r\n\t\t\tvar doReturn = 'cookies';\r\n\t\t}else if(options=='set'){\r\n\t\t\tvar doReturn = 'set';\r\n\t\t}else{\r\n\t\t\tvar doReturn = false;\r\n\t\t}\r\n\t\tvar defaults = {\r\n\t\t\tmessage: 'We use cookies to track usage and preferences.', //Message displayed on bar\r\n\t\t\tacceptButton: true, //Set to true to show accept/enable button\r\n\t\t\tacceptText: 'I Understand', //Text on accept/enable button\r\n\t\t\tacceptFunction: function(cookieValue){if(cookieValue!='enabled' && cookieValue!='accepted') window.location = window.location.href;}, //Function to run after accept\r\n\t\t\tdeclineButton: false, //Set to true to show decline/disable button\r\n\t\t\tdeclineText: 'Disable Cookies', //Text on decline/disable button\r\n\t\t\tdeclineFunction: function(cookieValue){if(cookieValue=='enabled' || cookieValue=='accepted') window.location = window.location.href;}, //Function to run after decline\r\n\t\t\tpolicyButton: false, //Set to true to show Privacy Policy button\r\n\t\t\tpolicyText: 'Privacy Policy', //Text on Privacy Policy button\r\n\t\t\tpolicyURL: '/privacy-policy/', //URL of Privacy Policy\r\n\t\t\tautoEnable: true, //Set to true for cookies to be accepted automatically. Banner still shows\r\n\t\t\tacceptOnContinue: false, //Set to true to accept cookies when visitor moves to another page\r\n\t\t\tacceptOnScroll: false, //Set to true to accept cookies when visitor scrolls X pixels up or down\r\n\t\t\tacceptAnyClick: false, //Set to true to accept cookies when visitor clicks anywhere on the page\r\n\t\t\texpireDays: 365, //Number of days for cookieBar cookie to be stored for\r\n\t\t\trenewOnVisit: false, //Renew the cookie upon revisit to website\r\n\t\t\tforceShow: false, //Force cookieBar to show regardless of user cookie preference\r\n\t\t\teffect: 'slide', //Options: slide, fade, hide\r\n\t\t\telement: 'body', //Element to append/prepend cookieBar to. Remember \".\" for class or \"#\" for id.\r\n\t\t\tappend: false, //Set to true for cookieBar HTML to be placed at base of website. Actual position may change according to CSS\r\n\t\t\tfixed: false, //Set to true to add the class \"fixed\" to the cookie bar. Default CSS should fix the position\r\n\t\t\tbottom: false, //Force CSS when fixed, so bar appears at bottom of website\r\n\t\t\tzindex: '', //Can be set in CSS, although some may prefer to set here\r\n\t\t\tdomain: String(window.location.hostname), //Location of privacy policy\r\n\t\t\treferrer: String(document.referrer) //Where visitor has come from\r\n\t\t};\r\n\t\tvar options = $.extend(defaults,options);\r\n\t\t\r\n\t\t//Sets expiration date for cookie\r\n\t\tvar expireDate = new Date();\r\n\t\texpireDate.setTime(expireDate.getTime()+(options.expireDays*86400000));\r\n\t\texpireDate = expireDate.toGMTString();\r\n\t\t\r\n\t\tvar cookieEntry = 'cb-enabled={value}; expires='+expireDate+'; path=/';\r\n\t\t\r\n\t\t//Retrieves current cookie preference\r\n\t\tvar i,cookieValue='',aCookie,aCookies=document.cookie.split('; ');\r\n\t\tfor (i=0;i<aCookies.length;i++){\r\n\t\t\taCookie = aCookies[i].split('=');\r\n\t\t\tif(aCookie[0]=='cb-enabled'){\r\n    \t\t\tcookieValue = aCookie[1];\r\n\t\t\t}\r\n\t\t}\r\n\t\t//Sets up default cookie preference if not already set\r\n\t\tif(cookieValue=='' && doReturn!='cookies' && options.autoEnable){\r\n\t\t\tcookieValue = 'enabled';\r\n\t\t\tdocument.cookie = cookieEntry.replace('{value}','enabled');\r\n\t\t}else if((cookieValue=='accepted' || cookieValue=='declined') && doReturn!='cookies' && options.renewOnVisit){\r\n\t\t\tdocument.cookie = cookieEntry.replace('{value}',cookieValue);\r\n\t\t}\r\n\t\tif(options.acceptOnContinue){\r\n\t\t\tif(options.referrer.indexOf(options.domain)>=0 && String(window.location.href).indexOf(options.policyURL)==-1 && doReturn!='cookies' && doReturn!='set' && cookieValue!='accepted' && cookieValue!='declined'){\r\n\t\t\t\tdoReturn = 'set';\r\n\t\t\t\tval = 'accepted';\r\n\t\t\t}\r\n\t\t}\r\n\t\tif(doReturn=='cookies'){\r\n\t\t\t//Returns true if cookies are enabled, false otherwise\r\n\t\t\tif(cookieValue=='enabled' || cookieValue=='accepted'){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else if(doReturn=='set' && (val=='accepted' || val=='declined')){\r\n\t\t\t//Sets value of cookie to 'accepted' or 'declined'\r\n\t\t\tdocument.cookie = cookieEntry.replace('{value}',val);\r\n\t\t\tif(val=='accepted'){\r\n\t\t\t\treturn true;\r\n\t\t\t}else{\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t}else{\r\n\t\t\t//Sets up enable/accept button if required\r\n\t\t\tvar message = options.message.replace('{policy_url}',options.policyURL);\r\n\t\t\t\r\n\t\t\tif(options.acceptButton){\r\n\t\t\t\tvar acceptButton = '<a href=\"\" class=\"cb-enable\">'+options.acceptText+'</a>';\r\n\t\t\t}else{\r\n\t\t\t\tvar acceptButton = '';\r\n\t\t\t}\r\n\t\t\t//Sets up disable/decline button if required\r\n\t\t\tif(options.declineButton){\r\n\t\t\t\tvar declineButton = '<a href=\"\" class=\"cb-disable\">'+options.declineText+'</a>';\r\n\t\t\t}else{\r\n\t\t\t\tvar declineButton = '';\r\n\t\t\t}\r\n\t\t\t//Sets up privacy policy button if required\r\n\t\t\tif(options.policyButton){\r\n\t\t\t\tvar policyButton = '<a href=\"'+options.policyURL+'\" class=\"cb-policy\">'+options.policyText+'</a>';\r\n\t\t\t}else{\r\n\t\t\t\tvar policyButton = '';\r\n\t\t\t}\r\n\t\t\t//Whether to add \"fixed\" class to cookie bar\r\n\t\t\tif(options.fixed){\r\n\t\t\t\tif(options.bottom){\r\n\t\t\t\t\tvar fixed = ' class=\"fixed bottom\"';\r\n\t\t\t\t}else{\r\n\t\t\t\t\tvar fixed = ' class=\"fixed\"';\r\n\t\t\t\t}\r\n\t\t\t}else{\r\n\t\t\t\tvar fixed = '';\r\n\t\t\t}\r\n\t\t\tif(options.zindex!=''){\r\n\t\t\t\tvar zindex = ' style=\"z-index:'+options.zindex+';\"';\r\n\t\t\t}else{\r\n\t\t\t\tvar zindex = '';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//Displays the cookie bar if arguments met\r\n\t\t\tif(options.forceShow || cookieValue=='enabled' || cookieValue==''){\r\n\t\t\t\tif(options.append){\r\n\t\t\t\t\t$(options.element).append('<div id=\"cookie-bar\"'+fixed+zindex+'><p>'+message+acceptButton+declineButton+policyButton+'</p></div>');\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$(options.element).prepend('<div id=\"cookie-bar\"'+fixed+zindex+'><p>'+message+acceptButton+declineButton+policyButton+'</p></div>');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tvar removeBar = function(func){\r\n\t\t\t\tif(options.acceptOnScroll) $(document).off('scroll');\r\n\t\t\t\tif(typeof(func)==='function') func(cookieValue);\r\n\t\t\t\tif(options.effect=='slide'){\r\n\t\t\t\t\t$('#cookie-bar').slideUp(300,function(){$('#cookie-bar').remove();});\r\n\t\t\t\t}else if(options.effect=='fade'){\r\n\t\t\t\t\t$('#cookie-bar').fadeOut(300,function(){$('#cookie-bar').remove();});\r\n\t\t\t\t}else{\r\n\t\t\t\t\t$('#cookie-bar').hide(0,function(){$('#cookie-bar').remove();});\r\n\t\t\t\t}\r\n\t\t\t\t$(document).unbind('click',anyClick);\r\n\t\t\t};\r\n\t\t\tvar cookieAccept = function(){\r\n\t\t\t\tdocument.cookie = cookieEntry.replace('{value}','accepted');\r\n\t\t\t\tremoveBar(options.acceptFunction);\r\n\t\t\t};\r\n\t\t\tvar cookieDecline = function(){\r\n\t\t\t\tvar deleteDate = new Date();\r\n\t\t\t\tdeleteDate.setTime(deleteDate.getTime()-(864000000));\r\n\t\t\t\tdeleteDate = deleteDate.toGMTString();\r\n\t\t\t\taCookies=document.cookie.split('; ');\r\n\t\t\t\tfor (i=0;i<aCookies.length;i++){\r\n\t\t\t\t\taCookie = aCookies[i].split('=');\r\n\t\t\t\t\tif(aCookie[0].indexOf('_')>=0){\r\n\t\t\t\t\t\tdocument.cookie = aCookie[0]+'=0; expires='+deleteDate+'; domain='+options.domain.replace('www','')+'; path=/';\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tdocument.cookie = aCookie[0]+'=0; expires='+deleteDate+'; path=/';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tdocument.cookie = cookieEntry.replace('{value}','declined');\r\n\t\t\t\tremoveBar(options.declineFunction);\r\n\t\t\t};\r\n\t\t\tvar anyClick = function(e){\r\n\t\t\t\tif(!$(e.target).hasClass('cb-policy')) cookieAccept();\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t$('#cookie-bar .cb-enable').click(function(){cookieAccept();return false;});\r\n\t\t\t$('#cookie-bar .cb-disable').click(function(){cookieDecline();return false;});\r\n\t\t\tif(options.acceptOnScroll){\r\n\t\t\t\tvar scrollStart = $(document).scrollTop(),scrollNew,scrollDiff;\r\n\t\t\t\t$(document).on('scroll',function(){\r\n\t\t\t\t\tscrollNew = $(document).scrollTop();\r\n\t\t\t\t\tif(scrollNew>scrollStart){\r\n\t\t\t\t\t\tscrollDiff = scrollNew - scrollStart;\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tscrollDiff = scrollStart - scrollNew;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif(scrollDiff>=Math.round(options.acceptOnScroll)) cookieAccept();\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\tif(options.acceptAnyClick){\r\n\t\t\t\t$(document).bind('click',anyClick);\r\n\t\t\t}\r\n\t\t}\r\n\t};\r\n})(jQuery);"]}